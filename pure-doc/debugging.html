<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PURE API: Debugging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pure_doxystyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="still-single-logo.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">PURE API<span id="projectnumber">&#160;0.4</span>
   </div>
   <div id="projectbrief">PR00F&#39;s Ultimate Rendering Engine full documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('debugging.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Debugging</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#logging">Logging</a>
  </li>
  <li class="level1">
    <a href="#memory_usage">Memory Usage</a>
  </li>
  <li class="level1">
    <a href="#manager_write_list">Manager WriteList()</a>
  </li>
  <li class="level1">
    <a href="#render_hints">Render Hints</a>
  </li>
  <li class="level1">
    <a href="#current_stats">Current Statistics</a>
  </li>
  <li class="level1">
    <a href="#last_frame_stats">Last Frame Statistics</a>
  </li>
  <li class="level1">
    <a href="#other_stats">Other Statistics</a>
  </li>
  <li class="level1">
    <a href="#engine_write_list">Engine WriteList()</a>
  </li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="logging"></a>
Logging</h1>
<p>The engine uses <a href="https://github.com/proof88/Console" target="_blank">CConsole logger</a> for logging purpose. <br  />
 Logging has to be explicitly enabled to see the logs and to generate log file. You can get the CConsole instance from the engine by PR00FsReducedRenderingEngine::getConsole(). <br  />
 However, if you want to turn on logging before the engine is created/initialized, you should implicitly create the singleton CConsole instance with <b>CConsole::getConsoleInstance()</b> and set it up properly. For this you can see example of how I do it in <a href="https://github.com/proof88/gfxcore2/blob/master/gfxcore2/gfxcore2/gfxcore2.cpp" target="_blank">tmcsEnableDebugging() of the gfxcore2 project</a>.</p>
<h1><a class="anchor" id="memory_usage"></a>
Memory Usage</h1>
<p>Each PRREManager and PRREManaged instance is able to report its used memory by invoking its <b>getUsedSystemMemory()</b> method. <br  />
 Some managers and manageds can also report their used video memory by invoking their <b>getUsedVideoMemory()</b> method. <br  />
 Invoking any of the above functions of a manager instance reports the summarized amount of resource usage for all of its managed instances.</p>
<h1><a class="anchor" id="manager_write_list"></a>
Manager WriteList()</h1>
<p>Each PRREManager -derived manager is able to log its collected statistics and list of its managed objects by invoking its <b>WriteList()</b> method.</p>
<h1><a class="anchor" id="render_hints"></a>
Render Hints</h1>
<p>Render Hints are debug switches for the current renderer. These can be switched on-the-fly, so no reinitialization is needed. <br  />
 Each renderer (a class implementing PRREIRenderer interface) implements its own switches that are stored in a <b>TPRRE_RENDER_HINT</b> variable. See the detailed description at the actual renderer. <br  />
 Use the current renderer's <b>getRenderHints()</b> and <b>SetRenderHints()</b> functions to access these switches. <br  />
 These render hints can be logged anytime by invoking current renderer's PRREIRenderer::WriteStats() implementation.</p>
<h1><a class="anchor" id="current_stats"></a>
Current Statistics</h1>
<p>Each renderer (a class implementing PRREIRenderer interface) implements so called "Current Statistics" that are being collected for arbitrary time duration. The first duration starts when the engine is initialized. From that point, the current renderer is updating its "Current Statistics" whenever its PRREIRenderer::RenderScene() is invoked. <br  />
 Normally this duration lasts until the engine is shut down. <br  />
 However, if the current renderer's PRREIRenderer::ResetStatistics() implementation is invoked, the "Current Statistics" are concluded, saved for later observation and reset. Reset means that a new duration is started from where new statistics are collected that are valid only for the new duration. This is why we say these are collected for arbitrary time duration, since you can always start a new duration whenever you want. <br  />
 This feature is very useful when e.g. you want to measure average FPS from different camera views of the scene, or with different display settings, etc, without restarting your client application. <br  />
 I personally used this feature when I was switching back-and-forth between different occlusion culling method settings, render paths, etc. without changing anything in the scene itself, to see how FPS was varying. <br  />
 Resetting "Current Statistics" also saves the current <a class="el" href="#render_hints">Render Hints</a> so you always know which render debug switches were applied to different "Current Statistics" durations if you are observing the log. <br  />
 Currently following "Current Statistics" are collected per duration:</p><ul>
<li>length of duration;</li>
<li>number of rendered frames;</li>
<li>min/max/avg frame time;</li>
<li>average fps;</li>
<li>rendering hints active for this specific duration.</li>
</ul>
<p>These statistics can be logged anytime by invoking current renderer's PRREIRenderer::WriteStats() implementation.</p>
<h1><a class="anchor" id="last_frame_stats"></a>
Last Frame Statistics</h1>
<p>Currently only PRRERendererHWfixedPipe implements "Last Frame Statistics". These stats are automatically reset at the beginning of each frame and concluded at the end of each frame, meaning that these are just momentary values. <br  />
 Currently following "Last Frame Statistics" are maintained:</p><ul>
<li>number of 3D objects iterated on by the renderer;<ul>
<li>grouped by occluder/occludee/occlusion-testing/occlusion-status properties;</li>
</ul>
</li>
<li>number of triangles and vertices processed.</li>
</ul>
<p>These statistics can be logged anytime by invoking current renderer's PRREIRenderer::WriteStats() implementation, and can be also programmatically queried by the <b>getLastFrame...()</b> functions of the current renderer.</p>
<h1><a class="anchor" id="other_stats"></a>
Other Statistics</h1>
<p>PRREObject3DManager collects HW occlusion query related statistics:</p><ul>
<li>Sync method: longest wait time for a HW occlusion query to finish (in the same frame it was started);</li>
<li>ASync method: minimum and maximum number of frames elapsed between starting and finishing a HW occlusion query.</li>
</ul>
<p>PRREObject3DManager::WriteList() logs these with per-object granularity. <br  />
 The current renderer's PRREIRenderer::ResetStatistics() implementation saves and resets these stats too.</p>
<h1><a class="anchor" id="engine_write_list"></a>
Engine WriteList()</h1>
<p>All above information mentioned previously on this page can be logged by a single call to PR00FsReducedRenderingEngine::WriteList(). <br  />
 It also summarizes the summarized memory usages calculated by the managers. <br  />
 Engine's <b>WriteList()</b> is automatically invoked if the user previously invokes <b>SetAutoWriteStatsAtShutdown(true)</b>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
