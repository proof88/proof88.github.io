<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PURE API: Debugging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="pure_doxystyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="still-single-logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PURE API
   &#160;<span id="projectnumber">0.3</span>
   </div>
   <div id="projectbrief">PR00F&#39;s Ultimate Rendering Engine full documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('debugging.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Debugging </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#logging">Logging</a></li>
<li class="level1"><a href="#memory_usage">Memory Usage</a></li>
<li class="level1"><a href="#manager_write_list">Manager WriteList()</a></li>
<li class="level1"><a href="#render_hints">Render Hints</a></li>
<li class="level1"><a href="#current_stats">Current Statistics</a></li>
<li class="level1"><a href="#last_frame_stats">Last Frame Statistics</a></li>
<li class="level1"><a href="#other_stats">Other Statistics</a></li>
<li class="level1"><a href="#engine_write_list">Engine WriteList()</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="logging"></a>
Logging</h1>
<p>The engine uses <a href="https://github.com/proof88/Console">CConsole logger</a> for logging purpose. <br  />
 Logging has to be explicitly enabled to see the logs and to generate log file. You can get the CConsole instance from the engine by <a class="el" href="class_p_r00_fs_reduced_rendering_engine.html#ab81a13706822f5e94ed2711aed327104" title="Returns access to console preset with logger module name as this class.">PR00FsReducedRenderingEngine::getConsole()</a>. <br  />
 However, if you want to turn on logging before the engine is created/initialized, you should implicitly create the singleton CConsole instance with <b>CConsole::getConsoleInstance()</b> and set it up properly. For this you can see example of how I do it in <a href="https://github.com/proof88/gfxcore2/blob/master/gfxcore2/gfxcore2/gfxcore2.cpp">tmcsEnableDebugging() of the gfxcore2 project</a>.</p>
<h1><a class="anchor" id="memory_usage"></a>
Memory Usage</h1>
<p>Each <a class="el" href="class_p_r_r_e_manager.html" title="Ancestor class for manager classes.">PRREManager</a> and <a class="el" href="class_p_r_r_e_managed.html" title="Ancestor class for managed classes.">PRREManaged</a> instance is able to report its used memory by invoking its <b>getUsedSystemMemory()</b> method. <br  />
 Some managers and manageds can also report their used video memory by invoking their <b>getUsedVideoMemory()</b> method. <br  />
 Invoking any of the above functions of a manager instance reports the summarized amount of resource usage for all of its managed instances.</p>
<h1><a class="anchor" id="manager_write_list"></a>
Manager WriteList()</h1>
<p>Each <a class="el" href="class_p_r_r_e_manager.html" title="Ancestor class for manager classes.">PRREManager</a> -derived manager is able to log its collected statistics and list of its managed objects by invoking its <b>WriteList()</b> method.</p>
<h1><a class="anchor" id="render_hints"></a>
Render Hints</h1>
<p>Render Hints are debug switches for the current renderer. These can be switched on-the-fly, so no reinitialization is needed. <br  />
 Each renderer (a class implementing <a class="el" href="class_p_r_r_e_i_renderer.html" title="Renderer interface.">PRREIRenderer</a> interface) implements its own switches that are stored in a <b>TPRRE_RENDER_HINT</b> variable. See the detailed description at the actual renderer. <br  />
 Use the current renderer's <b>getRenderHints()</b> and <b>SetRenderHints()</b> functions to access these switches. <br  />
 These render hints can be logged anytime by invoking current renderer's <a class="el" href="class_p_r_r_e_i_renderer.html#a463e48ec5250df3a3cbaa1d5b410f2ca" title="Writes &quot;Current Statistics&quot; and &quot;Last Frame Statistics&quot; to the console window.">PRREIRenderer::WriteStats()</a> implementation.</p>
<h1><a class="anchor" id="current_stats"></a>
Current Statistics</h1>
<p>Each renderer (a class implementing <a class="el" href="class_p_r_r_e_i_renderer.html" title="Renderer interface.">PRREIRenderer</a> interface) implements so called "Current Statistics" that are being collected for arbitrary time duration. The first duration starts when the engine is initialized. From that point, the current renderer is updating its "Current Statistics" whenever its <a class="el" href="class_p_r_r_e_i_renderer.html#a185bc8e81fbcaef3e809eb8fa94ced77" title="Renders the scene.">PRREIRenderer::RenderScene()</a> is invoked. <br  />
 Normally this duration lasts until the engine is shut down. <br  />
 However, if the current renderer's <a class="el" href="class_p_r_r_e_i_renderer.html#ac1e8823bd645cc86e0d715f865c38cd2" title="Resets &quot;Current Statistics&quot;.">PRREIRenderer::ResetStatistics()</a> implementation is invoked, the "Current Statistics" are concluded, saved for later observation and reset. Reset means that a new duration is started from where new statistics are collected that are valid only for the new duration. This is why we say these are collected for arbitrary time duration, since you can always start a new duration whenever you want. <br  />
 This feature is very useful when e.g. you want to measure average FPS from different camera views of the scene, or with different display settings, etc, without restarting your client application. <br  />
 I personally used this feature when I was switching back-and-forth between different occlusion culling method settings, render paths, etc. without changing anything in the scene itself, to see how FPS was varying. <br  />
 Resetting "Current Statistics" also saves the current <a class="el" href="debugging.html#render_hints">Render Hints</a> so you always know which render debug switches were applied to different "Current Statistics" durations if you are observing the log. <br  />
 Currently following "Current Statistics" are collected per duration:</p><ul>
<li>length of duration;</li>
<li>number of rendered frames;</li>
<li>min/max/avg frame time;</li>
<li>average fps;</li>
<li>rendering hints active for this specific duration.</li>
</ul>
<p>These statistics can be logged anytime by invoking current renderer's <a class="el" href="class_p_r_r_e_i_renderer.html#a463e48ec5250df3a3cbaa1d5b410f2ca" title="Writes &quot;Current Statistics&quot; and &quot;Last Frame Statistics&quot; to the console window.">PRREIRenderer::WriteStats()</a> implementation.</p>
<h1><a class="anchor" id="last_frame_stats"></a>
Last Frame Statistics</h1>
<p>Currently only <a class="el" href="class_p_r_r_e_renderer_h_wfixed_pipe.html" title="Incremental fixed-function hardware renderer path.">PRRERendererHWfixedPipe</a> implements "Last Frame Statistics". These stats are automatically reset at the beginning of each frame and concluded at the end of each frame, meaning that these are just momentary values. <br  />
 Currently following "Last Frame Statistics" are maintained:</p><ul>
<li>number of 3D objects iterated on by the renderer;<ul>
<li>grouped by occluder/occludee/occlusion-testing/occlusion-status properties;</li>
</ul>
</li>
<li>number of triangles and vertices processed.</li>
</ul>
<p>These statistics can be logged anytime by invoking current renderer's <a class="el" href="class_p_r_r_e_i_renderer.html#a463e48ec5250df3a3cbaa1d5b410f2ca" title="Writes &quot;Current Statistics&quot; and &quot;Last Frame Statistics&quot; to the console window.">PRREIRenderer::WriteStats()</a> implementation, and can be also programmatically queried by the <b>getLastFrame...()</b> functions of the current renderer.</p>
<h1><a class="anchor" id="other_stats"></a>
Other Statistics</h1>
<p><a class="el" href="class_p_r_r_e_object3_d_manager.html" title="3D object manager class.">PRREObject3DManager</a> collects HW occlusion query related statistics:</p><ul>
<li>Sync method: longest wait time for a HW occlusion query to finish (in the same frame it was started);</li>
<li>ASync method: minimum and maximum number of frames elapsed between starting and finishing a HW occlusion query.</li>
</ul>
<p><a class="el" href="class_p_r_r_e_object3_d_manager.html#afa96a3ec870c06c7de0880b9c2c0de8a" title="From PRREMesh3DManager, adding logging vertex transfer and object data, including some occlusion quer...">PRREObject3DManager::WriteList()</a> logs these with per-object granularity. <br  />
 The current renderer's <a class="el" href="class_p_r_r_e_i_renderer.html#ac1e8823bd645cc86e0d715f865c38cd2" title="Resets &quot;Current Statistics&quot;.">PRREIRenderer::ResetStatistics()</a> implementation saves and resets these stats too.</p>
<h1><a class="anchor" id="engine_write_list"></a>
Engine WriteList()</h1>
<p>All above information mentioned previously on this page can be logged by a single call to <a class="el" href="class_p_r00_fs_reduced_rendering_engine.html#a4c2bc4ed20bb57b4e9fd0cc96a82ddb7" title="Invoke WriteList() of all children instances.">PR00FsReducedRenderingEngine::WriteList()</a>. <br  />
 It also summarizes the summarized memory usages calculated by the managers. <br  />
 Engine's <b>WriteList()</b> is automatically invoked if the user previously invokes <b>SetAutoWriteStatsAtShutdown(true)</b>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Nov 1 2021 22:00:13 for PURE API by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
